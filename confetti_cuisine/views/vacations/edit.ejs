<div class="data-form">
  <form
    class="form-signin"
    action="<%=`/vacations/${vacation._id}/update?_method=PUT`%>"
    method="POST"
  >
    <h2 class="form-signin-heading">Edit vacation:</h2>

    <label for="inputTitle">Title</label>
    <input
      type="text"
      name="title"
      id="inputTitle"
      class="form-control"
      value="<%= vacation.title %>"
      placeholder="Title"
      autofocus
    />

    <label for="inputDescription">Description</label>
    <input
      type="text"
      name="description"
      id="inputDescription"
      class="form-control"
      value="<%= vacation.description %>"
      placeholder="Description"
    />

    <label for="inputHeroImage">Hero Image</label><br />
    <select name="heroImage" id="inputHeroImage" class="form-control">
      <option value="Argentina.jpg" selected="<%= vacation.heroImage === "Argentina.jpg" %>">Argentina.jpg</option>
      <option value="Argentina.jpg" <%= (vacation.heroImage === "Argentina.jpg") ? "selected" : "" %>>Argentina.jpg</option>
      <option value="cat.jpg" <%= (vacation.heroImage === "cat.jpg") ? "selected" : "" %>>cat.jpg</option>
      <option value="Croatia.jpg" <%= (vacation.heroImage === "Croatia.jpg") ? "selected" : "" %>>Croatia.jpg</option>
      <option value="English.jpg" <%= (vacation.heroImage === "English.jpg") ? "selected" : "" %>>English.jpg</option>
      <option value="French.jpg" <%= (vacation.heroImage === "French.jpg") ? "selected" : "" %>>French.jpg</option>
      <option value="fruit.jpg" <%= (vacation.heroImage === "fruit.jpg") ? "selected" : "" %>>fruit.jpg</option>
      <option value="Germany.jpg" <%= (vacation.heroImage === "Germany.jpg") ? "selected" : "" %>>Germany.jpg</option>
      <option value="graph.png" <%= (vacation.heroImage === "graph.png") ? "selected" : "" %>>graph.png</option>
      <option value="HeroImage.jpg" <%= (vacation.heroImage === "HeroImage.jpg") ? "selected" : "" %>>HeroImage.jpg</option>
      <option value="icon.png" <%= (vacation.heroImage === "icon.png") ? "selected" : "" %>>icon.png</option>
      <option value="Indian.jpg" <%= (vacation.heroImage === "Indian.jpg") ? "selected" : "" %>>Indian.jpg</option>
      <option value="Israel.jpg" <%= (vacation.heroImage === "Israel.jpg") ? "selected" : "" %>>Israel.jpg</option>
      <option value="Italy.jpg" <%= (vacation.heroImage === "Italy.jpg") ? "selected" : "" %>>Italy.jpg</option>
      <option value="Japan.jpg" <%= (vacation.heroImage === "Japan.jpg") ? "selected" : "" %>>Japan.jpg</option>
      <option value="Mexico.jpg" <%= (vacation.heroImage === "Mexico.jpg") ? "selected" : "" %>>Mexico.jpg</option>
      <option value="Mococcan.jpg" <%= (vacation.heroImage === "Mococcan.jpg") ? "selected" : "" %>>Mococcan.jpg</option>
      <option value="people.jpg" <%= (vacation.heroImage === "people.jpg") ? "selected" : "" %>>people.jpg</option>
      <option value="Peruvian.jpg" <%= (vacation.heroImage === "Peruvian.jpg") ? "selected" : "" %>>Peruvian.jpg</option>
      <option value="Portugal.jpg" <%= (vacation.heroImage === "Portugal.jpg") ? "selected" : "" %>>Portugal.jpg</option>
      <option value="Spanish.jpg" <%= (vacation.heroImage === "Spanish.jpg") ? "selected" : "" %>>Spanish.jpg</option>
      <option value="Thai.jpg" <%= (vacation.heroImage === "Thai.jpg") ? "selected" : "" %>>Thai.jpg</option>
      <option value="Turkish.jpg" <%= (vacation.heroImage === "Turkish.jpg") ? "selected" : "" %>>Turkish.jpg</option>
        </select>

    <label for="inputMaxTravelers">Max Travelers</label>
    <input
      type="text"
      name="maxTravelers"
      id="inputMaxTravelers"
      pattern="\d*"
      class="form-control"
      value="<%= vacation.maxTravelers %>"
      placeholder="Max Travelers"
      required
    />

    <label for="inputCost">Cost</label>
    <input
      type="text"
      name="cost"
      id="inputCost"
      pattern="\d*"
      class="form-control"
      value="<%= vacation.cost %>"
      placeholder="Cost"
      required
    />
    
    <label for="inputCuisine">Cuisine</label><br />
    <select name="cuisine" id="inputCuisine" class="form-control">
      <option value="" <%= (vacation.cuisine === "") ? "selected" : "" %>></option>
      <option value="Continental" <%= (vacation.cuisine === "Continental") ? "selected" : "" %>>Continental</option>
      <option value="Traditional" <%= (vacation.cuisine === "Traditional") ? "selected" : "" %>>Traditional</option>
      <option value="Haute-cuisine" <%= (vacation.cuisine === "Haute-cuisine") ? "selected" : "" %>>Haute-cuisine</option>
      <option value="Nouvelle-cuisine" <%= (vacation.cuisine === "Nouvelle-cuisine") ? "selected" : "" %>>Nouvelle-cuisine</option>
      <option value="Fusion" <%= (vacation.cuisine === "Fusion") ? "selected" : "" %>>Fusion</option>
      <option value="Vegan" <%= (vacation.cuisine === "Vegan") ? "selected" : "" %>>Vegan</option>
      <option value="Vegetarian" <%= (vacation.cuisine === "Vegetarian") ? "selected" : "" %>>Vegetarian</option>
      <option value="Asian" <%= (vacation.cuisine === "Asian") ? "selected" : "" %>>Asian</option>
      <option value="Indian" <%= (vacation.cuisine === "Indian") ? "selected" : "" %>>Indian</option>
      <option value="Middle-Eastern" <%= (vacation.cuisine === "Middle-Eastern") ? "selected" : "" %>>Middle-Eastern</option>
      <option value="African" <%= (vacation.cuisine === "African") ? "selected" : "" %>>African</option>
      <option value="Central American" <%= (vacation.cuisine === "Central American") ? "selected" : "" %>>Central American</option>
      <option value="South American" <%= (vacation.cuisine === "South American") ? "selected" : "" %>>South American</option>
    </select>

    <label for="inputDestination">Destination</label>
    <input
      type="text"
      name="destination"
      id="inputDestination"
      class="form-control"
      value="<%= vacation.destination %>"
      placeholder="Destination"
    />

    <label for="inputDepartureLocation">Departure Location</label><br />
    <select
      name="departureLocation"
      id="inputDepartureLocation"
      class="form-control"
    >
      <option value="" <%= (vacation.departureLocation === "") ? "selected" : "" %>></option>
      <option value="New York (JFK)" <%= (vacation.departureLocation === "New York (JFK)") ? "selected" : "" %>>New York (JFK)</option>
      <option value="Boston (BOS)" <%= (vacation.departureLocation === "Boston (BOS)") ? "selected" : "" %>>Boston (BOS)</option>
      <option value="Chicago (ORD)" <%= (vacation.departureLocation === "Chicago (ORD)") ? "selected" : "" %>>Chicago (ORD)</option>
      <option value="Miami (MIA)" <%= (vacation.departureLocation === "Miami (MIA)") ? "selected" : "" %>>Miami (MIA)</option>
      <option value="St. Louis (STL)" <%= (vacation.departureLocation === "St. Louis (STL)") ? "selected" : "" %>>St. Louis (STL)</option>
      <option value="Dallas (DFW)" <%= (vacation.departureLocation === "Dallas (DFW)") ? "selected" : "" %>>Dallas (DFW)</option>
      <option value="Seattle (SEA)" <%= (vacation.departureLocation === "Seattle (SEA)") ? "selected" : "" %>>Seattle (SEA)</option>
      <option value="San Francisco (SFO)" <%= (vacation.departureLocation === "San Francisco (SFO)") ? "selected" : "" %>>San Francisco (SFO)</option>
    </select>

    <label for="inputDepartureDate">Departure Date</label>
    <input
      type="date"
      name="departureDate"
      id="inputDepartureDate"
      class="form-control"
      placeholder="Departure Date"
      value="<%= (new Date(vacation.departureDate)).toISOString().substr(0, 10) %>"
    />

    <label for="inputReturnDate">Return Date</label>
    <input
      type="date"
      name="returnDate"
      id="inputReturnDate"
      class="form-control"
      placeholder="Return Date"
      value="<%= (new Date(vacation.returnDate)).toISOString().substr(0, 10) %>"
    />


    <br /><button class="btn btn-lg btn-primary btn-block" type="submit">
      Save
    </button>
  </form>

  <script>
    const departureDateElement = document.getElementById("inputDepartureDate");
    const returnDateElement = document.getElementById("inputReturnDate");

    function sanitize(value, length) {
      let temp = new String(value);
      const remainingLength = length - temp.length;
      return temp.padStart(remainingLength + 1, "0");
    }

    function setDateConstraints () {
      const departureDateValue = departureDateElement.value;
      if (!departureDateValue) return;
      const date = new Date(departureDateValue);
      date.setDate(date.getDate() + 1);
      returnDateElement.min = `${sanitize(date.getFullYear(), 4)}-${
        sanitize(date.getMonth() + 1, 2)
      }-${sanitize(date.getDate(), 2)}`;
    }
    setDateConstraints()
    departureDateElement.addEventListener("change", setDateConstraints);
  </script>

</div>
